<div class="container">

    <div class="row" style="margin-top:1em">

        <div ng-controller="UsersController as ctrl">

            <table class="table">
                <thead>
                    <tr>
                        <th> <a href="#" ng-click="sortBy = 'name';reverse = !reverse" type="button"> Nom </a></th>
                        <th> <a href="#" ng-click="sortBy = 'email';reverse = !reverse" type="button"> Email </a></th>
                        <th> Bio </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="user in ctrl.users | orderBy:sortBy:reverse track by $index">
                        <td>
                            <a href ng-click="ctrl.editUser(user)">{{ user.name }}</a>
                            <button ng-click="ctrl.deleteUser(user)" type="button" style="float:none;" class="close">&times;</button>
                        </td>
                        <td>
                            {{ user.email }}
                        </td>
                        <td>
                            {{ user.bio }}
                        </td>
                    </tr>
                </tbody>
            </table>


            <form name="userForm" novalidate ng-submit="ctrl.save(userForm)">

                <div class="form-group">
                    <label for="name">Nom</label>
                    <input type="text" required name="name" id="name" class="form-control" ng-model="ctrl.user.name">
                    <p class="text-danger" ng-if="userForm.name.$invalid && userForm.name.$touched">
                        Obligatoire
                    </p>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" name="email" id="email" class="form-control" ng-model="ctrl.user.email">
                    <p class="text-danger" ng-if="userForm.email.$error.required && userForm.email.$touched">
                        Obligatoire
                    </p>
                    <p class="text-danger" ng-if="userForm.email.$error.email && userForm.email.$touched">
                        Email non valide
                    </p>
                </div>

                <div class="form-group" ng-class="{'has-error': userForm.bio.$invalid && userForm.bio.$touched }">
                    <label for="bio">Bio</label>
                    <textarea name="bio" id="bio" class="form-control" ng-minlength="10" ng-model="ctrl.user.bio"></textarea>
                    <p class="text-danger" ng-if="userForm.bio.$invalid && userForm.bio.$touched">
                        Trop court
                    </p>
                </div>

                <button ng-disabled="userForm.$invalid" class="btn btn-primary" type="submit">Enregistrer</button>

            </form>

        </div>

    </div>

</div>